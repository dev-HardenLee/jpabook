

영속성 컨텍스트가 다르면 기본키가 같아도 동일성( == )비교에 실패한다.

이럴 땐, equals()메소드를 오버라이딩하여 비교하여야 한다.

엔티티를 비교할 때는 비즈니스키를 활용한 동등성 비교를 권장한다.

동등성 비교를 위해 equals()를 오버라이딩 할 때는 비즈니스 키가 되는 필드들을 선택하면 된다. 

비즈니스 키가 되는 필드는 보통 중복되지 않고 거의 변하지 않는 데이터베이스 기본 키 후보들이 좋은 대상이다.

예를들어 주민등록번호가 있다면 중복되지 않고 변경되지 않으므로 좋은 비즈니스 키 대상이다.

객체 상태에서만 비교하므로 유일성만 보장된다면 가끔 있는 변경정도는 허용한다.

** 너무 딱딱하기 데이베이스 기본키 처럼 정하지 않아도 된다.

예를 들어 회원 엔티티에 이름과 연락처가 같은 회원이 없다면 회원의 이름과 연락처 정도만 조합해서 사용해도 된다.

